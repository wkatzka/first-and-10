<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sports Font Preview â€“ First & 10</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 2rem;
      font-family: system-ui, sans-serif;
      background: #0a0c10;
      color: #e2e8f0;
      min-height: 100vh;
    }
    h1 { font-size: 1.25rem; margin-bottom: 1rem; color: #94a3b8; }
    .preview-section {
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: rgba(15,23,42,0.8);
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.2);
    }
    .preview-section h2 {
      font-size: 0.875rem;
      font-weight: 600;
      color: #64748b;
      margin: 0 0 0.75rem 0;
    }
    .sample-row {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 0.5rem;
    }
    .sample-row:last-child { margin-bottom: 0; }
    .sample-label { min-width: 140px; font-size: 0.8rem; color: #64748b; }
    canvas.sample { image-rendering: pixelated; image-rendering: crisp-edges; }
    .sheet-img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      border: 1px solid rgba(148,163,184,0.2);
      margin-top: 1rem;
    }
    .note { font-size: 0.8rem; color: #64748b; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>Sports font preview (from sheet image)</h1>
  <p class="note">This page slices the font sheet into glyphs and renders sample text. "&" is not on the sheet, so it appears as a placeholder.</p>

  <div class="preview-section">
    <h2>Sample text (sprite font)</h2>
    <div class="sample-row"><span class="sample-label">FIRST & 10</span> <canvas id="sample1" class="sample"></canvas></div>
    <div class="sample-row"><span class="sample-label">10 20 30 40 50</span> <canvas id="sample2" class="sample"></canvas></div>
    <div class="sample-row"><span class="sample-label">SPORTS!</span> <canvas id="sample3" class="sample"></canvas></div>
  </div>

  <div class="preview-section">
    <h2>Original font sheet</h2>
    <img id="sheet" src="fonts/sports-font-sheet.png" alt="Font sheet" class="sheet-img" />
  </div>

  <script>
    (function () {
      const sheetImg = document.getElementById('sheet');
      if (!sheetImg) return;

      sheetImg.onload = function () {
        const w = sheetImg.naturalWidth;
        const h = sheetImg.naturalHeight;

        // Layout: 4 rows. Row 0 = SPORTS (6), Row 1 = A-M (13), Row 2 = N-Z (13), Row 3 = 1-9,0,! (11)
        const rows = [
          { n: 6,  chars: ['S','P','O','R','T','S'] },
          { n: 13, chars: ['A','B','C','D','E','F','G','H','I','J','K','L','M'] },
          { n: 13, chars: ['N','O','P','Q','R','S','T','U','V','W','X','Y','Z'] },
          { n: 11, chars: ['1','2','3','4','5','6','7','8','9','0','!'] }
        ];

        const rowH = h / 4;
        const map = new Map();

        const tempCanvas = document.createElement('canvas');
        tempCanvas.width = w;
        tempCanvas.height = h;
        const tctx = tempCanvas.getContext('2d');
        tctx.drawImage(sheetImg, 0, 0);

        for (let r = 0; r < rows.length; r++) {
          const row = rows[r];
          const cellW = w / row.n;
          const y0 = r * rowH;
          for (let c = 0; c < row.n; c++) {
            const ch = row.chars[c];
            const x0 = c * cellW;
            const glyph = document.createElement('canvas');
            glyph.width = Math.max(1, Math.ceil(cellW));
            glyph.height = Math.max(1, Math.ceil(rowH));
            const gctx = glyph.getContext('2d');
            gctx.drawImage(tempCanvas, x0, y0, cellW, rowH, 0, 0, glyph.width, glyph.height);
            map.set(ch, glyph);
          }
        }

        // Use 'O' for '0' if we want (sheet has 0 in row 3)
        if (map.has('O') && !map.has('0')) map.set('0', map.get('O'));
        if (map.has('0')) { /* keep digit 0 */ }

        function drawSampleText(canvasId, text, heightPx) {
          const canvas = document.getElementById(canvasId);
          if (!canvas) return;
          const chars = String(text).toUpperCase().split('');
          const gap = /^[\d\s]+$/.test(text) ? 0 : Math.round(heightPx * 0.08);
          const widths = [];
          for (const ch of chars) {
            if (ch === ' ') {
              widths.push(heightPx * 0.35);
            } else if (ch === '&') {
              widths.push(heightPx * 0.5);
            } else {
              const g = map.get(ch);
              widths.push(g ? (g.width / Math.max(1, g.height)) * heightPx : 0);
            }
          }
          let totalW = widths.reduce((a, b) => a + b, 0) + gap * Math.max(0, chars.length - 1);
          if (totalW <= 0) totalW = 200;

          canvas.width = Math.ceil(totalW);
          canvas.height = Math.ceil(heightPx * 1.2);
          const ctx = canvas.getContext('2d');
          ctx.fillStyle = '#0a0c10';
          ctx.fillRect(0, 0, canvas.width, canvas.height);

          let x = 0;
          const y = heightPx / 2;
          for (let i = 0; i < chars.length; i++) {
            const ch = chars[i];
            const w = widths[i] || 0;
            if (ch === '&') {
              ctx.fillStyle = '#64748b';
              ctx.font = (heightPx * 0.6) + 'px system-ui';
              ctx.textAlign = 'left';
              ctx.textBaseline = 'middle';
              ctx.fillText('&', x, y);
            } else if (ch !== ' ') {
              const g = map.get(ch);
              if (g) {
                const gw = (g.width / Math.max(1, g.height)) * heightPx;
                ctx.drawImage(g, x, 0, gw, heightPx);
              }
            }
            x += w + gap;
          }
        }

        const heightPx = 56;
        drawSampleText('sample1', 'FIRST & 10', heightPx);
        drawSampleText('sample2', '10 20 30 40 50', heightPx);
        drawSampleText('sample3', 'SPORTS!', heightPx);
      };
    })();
  </script>
</body>
</html>
